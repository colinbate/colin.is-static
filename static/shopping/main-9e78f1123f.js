function onUpdateReady(){alert("New version available, refresh to upgrade.")}!function(){"use strict";function e(t,n){function o(e,t){return function(){return e.apply(t,arguments)}}var a;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],r=this,l=0,c=s.length;c>l;l++)r[s[l]]=o(r[s[l]],r);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,i.hijacked||i,n):o.call(t,e,i,n)},t.addEventListener=function(e,i,n){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,i.hijacked||(i.hijacked=function(e){e.propagationStopped||i(e)}),n):o.call(t,e,i,n)}),"function"==typeof t.onclick&&(a=t.onclick,t.addEventListener("click",function(e){a(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!t,n=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,o=n&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=n&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(n&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var i,n;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),n=t.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(e),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,e.dispatchEvent(i)},e.prototype.determineEventType=function(e){return i&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;n&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,i;if(t=e.fastClickScrollParent,!t||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,i,a;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],n){if(a=window.getSelection(),a.rangeCount&&!a.isCollapsed)return!0;if(!o){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,s,r,l,c,p=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(c=e.changedTouches[0],p=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||p,p.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=p.tagName.toLowerCase(),"label"===r){if(t=this.findControl(p)){if(this.focus(p),i)return!1;p=t}}else if(this.needsFocus(p))return e.timeStamp-s>100||n&&window.top!==window&&"input"===r?(this.targetElement=null,!1):(this.focus(p),this.sendClick(p,e),n&&"select"===r||(this.targetElement=null,e.preventDefault()),!1);return n&&!o&&(l=p.fastClickScrollParent,l&&l.fastClickLastScrollTop!==l.scrollTop)?!0:(this.needsClick(p)||(e.preventDefault(),this.sendClick(p,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;i&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,n,o,a;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),o[1]>=10&&o[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(a=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],a>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction?!0:!1)},e.attach=function(t,i){return new e(t,i)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}();var app=app||{};app.util=app.util||{},app.util.OrderedMap=function(e){var t=this;this.items={},this.keys=[],Object.defineProperty(this,"length",{get:function(){return t.keys.length}}),e&&this.addRange(e)};var addWithOp=function(e,t,i){null!=e&&(t=t||this.getKey(e),this.items[t]=e,this.keys[i](t))};app.util.OrderedMap.prototype.push=function(e,t){addWithOp.call(this,e,t,"push")},app.util.OrderedMap.prototype.unshift=function(e,t){addWithOp.call(this,e,t,"unshift")},app.util.OrderedMap.prototype.add=app.util.OrderedMap.prototype.push;var remove=function(e,t){delete this.items[e],this.keys.splice(t,1)};app.util.OrderedMap.prototype.removeKey=function(e){var t=this.keys.indexOf(e);remove.call(this,e,t)},app.util.OrderedMap.prototype.removeIndex=function(e){var t=this.keys[e];remove.call(this,t,e)},app.util.OrderedMap.prototype.removeItem=function(e){var t=this.getKey(e);this.removeKey(t)},app.util.OrderedMap.prototype.containsKey=function(e){return e in this.items};var keySort=function(e,t,i){this.items[t],this.items[i];return e(t,i)};app.util.OrderedMap.prototype.sort=function(e){"function"==typeof e&&this.keys.sort(keySort.bind(this,e))},app.util.OrderedMap.prototype.groupByMap=function(e,t,i,n){var o,a,s,r,l={},c=this.keys.length,p=[],u=0;if(!e)return this.map(i,n);for(a=0;c>a;a+=1)o=this.items[this.keys[a]],e in o&&(o[e]in l||(l[o[e]]=[]),l[o[e]].push(this.keys[a]));for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(r=mapInternal.call(this,[],l[s],i,n,c,u),r.length&&(p.push(t.call(null,s)),Array.prototype.push.apply(p,r),u+=r.length));return p},app.util.OrderedMap.prototype.addRange=function(e){var t;if(e)for(t=0;t<e.length;t+=1)this.push(e[t])},app.util.OrderedMap.prototype.get=function(e){return this.items[e]},app.util.OrderedMap.prototype.getIndex=function(e){return this.items[this.keys[e]]};var mapInternal=function(e,t,i,n,o,a){var s,r,l=t.length;if(i){for(s=0;l>s;s+=1)r=t[s],(!n||n.call(null,this.items[r]))&&e.push(i.call(null,this.items[r],s,l,s+a,o));return e}};app.util.OrderedMap.prototype.map=function(e,t){return mapInternal.call(this,[],this.keys,e,t)},app.util.OrderedMap.prototype.getKey=function(e){if("_id"in e)return e._id;throw new Error("Unknown ID, please pass proper Todo object.")};var app=app||{};app.aisles=["Produce","Diary","Bakery","Meat","Deli","Frozen","Organic","Household","Grocery","Other"];var rules=[{key:"apple",aisle:"Produce"},{key:"berries",aisle:"Produce"},{key:"pear",aisle:"Produce"},{key:"persimmon",aisle:"Produce"},{key:"plum",aisle:"Produce"},{key:"pumpkin",aisle:"Produce"},{key:"orange",aisle:"Produce"},{key:"longan",aisle:"Produce"},{key:"lettuce",aisle:"Produce"},{key:"grape",aisle:"Produce"},{key:"pepper",aisle:"Produce"},{key:"bean",aisle:"Produce"},{key:"mushroom",aisle:"Produce"},{key:"mango",aisle:"Produce"},{key:"melon",aisle:"Produce"},{key:"lemon",aisle:"Produce"},{key:"lime",aisle:"Produce"},{key:"milk",aisle:"Dairy"},{key:"cheese",aisle:"Dairy"},{key:"yogurt",aisle:"Dairy"},{key:"egg",aisle:"Dairy"},{key:"chicken",aisle:"Meat"},{key:"beef",aisle:"Meat"},{key:"ham",aisle:"Meat"},{key:"donut",aisle:"Bakery"},{key:"doughnut",aisle:"Bakery"},{key:"muffin",aisle:"Bakery"},{key:"bagel",aisle:"Bakery"},{key:"cake",aisle:"Bakery"},{key:"pie",aisle:"Bakery"},{key:"scone",aisle:"Bakery"},{key:"meatball",aisle:"Deli"},{key:"tenders",aisle:"Deli"},{key:"wonton",aisle:"Frozen"},{key:"dumpling",aisle:"Frozen"},{key:"pizza",aisle:"Frozen"},{key:"cuisine",aisle:"Frozen"},{key:"slider",aisle:"Frozen"},{key:"eggo",aisle:"Frozen"},{key:"jam",aisle:"Grocery"},{key:/\bcan\b/i,aisle:"Grocery"},{key:"heinz",aisle:"Grocery"},{key:"noodle",aisle:"Grocery"},{key:"juice",aisle:"Grocery"},{key:"jam",aisle:"Grocery"},{key:/jell[yo]/i,aisle:"Grocery"},{key:"organic",aisle:"Organic"},{key:"protein",aisle:"Organic"},{key:/(almond|soy|coconut) milk/i,aisle:"Organic"}],toAisle=function(e){var t;for(t=rules.length-1;t>=0;t-=1)if("string"==typeof rules[t].key){if(e.toLowerCase().indexOf(rules[t].key)>-1)return rules[t].aisle}else if(rules[t].key.test(e))return rules[t].aisle;return"Grocery"};app.Todo=function(e){this._id=e._id||(new Date).toJSON(),this._rev=e._rev,this.title=m.prop(e.title),this.completed=m.prop(e.completed||!1),this.editing=m.prop(e.editing||!1),this.aisle=m.prop(e.aisle),this.expanded=m.prop(!1),this.groupBy=this.aisle()||toAisle(this.title())},app.Todo.prototype.update=function(e){this._rev=e._rev,this.title(e.title),this.completed(e.completed),this.editing(e.editing),this.aisle(e.aisle),this.groupBy=this.aisle()||toAisle(this.title())},app.Todo.prototype.setAisle=function(e){this.aisle(e),this.groupBy=e},app.Todo.prototype.toJSON=function(){var e={_id:this._id,_rev:this._rev,title:this.title(),editing:this.editing(),completed:this.completed()};return this.aisle()&&(e.aisle=this.aisle()),e};var app=app||{};app.db=app.db||{remote:"https://colinbate.cloudant.com/shopping-colin/",id:"shopping-colin"},function(){var e=app.db.id,t=new PouchDB(e),i=new PouchDB(app.db.remote);t.sync(i,{live:!0,retry:!0}).on("error",function(e){window.console.error(e)}),app.storage={get:function(e){return t.allDocs({include_docs:!0,descending:e||!1}).then(function(e){return e.rows.map(function(e){return new app.Todo(e.doc)})})},save:function(e,i){var n=this,o=e.toJSON();return i=i||1,t.put(o).then(function(t){return t.ok&&(e._rev=t.rev),t})["catch"](function(a){return 409===a.status&&4>i?(window.console.log("Conflict (409), retry",i),t.get(o._id).then(function(t){return e._rev=t._rev,n.save(e,i+1)})):void window.console.error(a)})},remove:function(e){return t.remove(e.toJSON())},subscribe:function(e){if("function"!=typeof e)throw new Error("Callback must be a function");var i=t.changes({since:"now",live:!0,include_docs:!0});return i.addListener("change",e),function(){i.removeListener("change",e)}}},app.cache={get:function(){var t=JSON.parse(window.localStorage.getItem(e)||"[]");return t.map(function(e){return new app.Todo(e)})},set:function(t){var i=t.map(function(e){return e.toJSON()});window.localStorage.setItem(e,JSON.stringify(i))},getSetting:function(t){return JSON.parse(window.localStorage.getItem(e+".setting."+t)||"false")},saveSetting:function(t,i){window.localStorage.setItem(e+".setting."+t,JSON.stringify(i))}}}();var app=app||{};app.controller=function(){var e=this;this.list=new app.util.OrderedMap(app.cache.get()),this.focusInit=!1,this.spinner=m.prop(!this.list.length),this.aisles=m.prop(),this.sortDesc=m.prop(!1),this.settingsWindow=m.prop("closed"),this.openItem=m.prop(null),this.settings=[{name:"sortDesc",label:"Sort newest first",reload:!0},{name:"showAisles",label:"Group by aisle",valueMap:function(e){this.aisles(e?"groupBy":"")}}];var t=function(e,t){t in this&&this[t](e)};this.loadSettings=function(){var e,i;for(e=this.settings.length-1;e>=0;e-=1)i=app.cache.getSetting(this.settings[e].name),this.settings[e].value=i,(this.settings[e].valueMap||t).call(this,i,this.settings[e].name)},this.updateSetting=function(e){e.value=!e.value,app.cache.saveSetting(e.name,e.value),(e.valueMap||t).call(this,e.value,e.name),e.reload&&n()};{var i=function(t){var i=e.sortDesc()?"unshift":"push";m.startComputation(),t.deleted?e.list.containsKey(t.id)&&(window.console.log("deleting",t.id),e.list.removeKey(t.id),e.removeNotification(t.id)):e.list.containsKey(t.id)?(window.console.log("updating",t.id),e.list.get(t.id).update(t.doc)):(window.console.log("adding",t.id),e.list[i](new app.Todo(t.doc)),e.addNotification("Added: "+t.doc.title,t.id)),app.cache.set(e.list),m.endComputation()},n=function(){app.storage.get(e.sortDesc()).then(function(t){m.startComputation(),e.list=new app.util.OrderedMap(t),app.cache.set(e.list),e.spinner(!1),m.endComputation()})};app.storage.subscribe(i)}this.loadSettings(),n(),this.title=m.prop(""),this.filter=m.prop(m.route.param("filter")||""),this.getPref=function(e){return app.cache.prefGet(e)},this.add=function(){var t,i=this.title().trim(),n=e.sortDesc()?"unshift":"push";i&&(t=new app.Todo({title:i}),this.list[n](t),app.storage.save(t),app.cache.set(this.list)),this.title("")},this.isVisible=function(e){switch(this.filter()){case"active":return!e.completed();case"completed":return e.completed();default:return!0}},this.expand=function(e){e.expanded(!e.expanded()),e.expanded()?(this.openItem()&&this.expand(this.openItem()),this.openItem(e)):this.openItem(null)},this.changeAisle=function(e,t){var i=t.target.value;i!==e.groupBy&&(e.setAisle(i),e.expanded(!1),app.storage.save(e),app.cache.set(this.list))},this.complete=function(e){e.completed(e.completed()?!1:!0),app.storage.save(e),app.cache.set(this.list)},this.edit=function(e){e.previousTitle=e.title(),e.editing(!0),this.focusInit=!1},this.doneEditing=function(e){e.editing(!1),e.title(e.title().trim()),e.title()?app.storage.save(e):(this.list.removeItem(e),app.storage.remove(e)),app.cache.set(this.list)},this.cancelEditing=function(e){e.title(e.previousTitle),e.editing(!1)},this.clearTitle=function(){this.title("")},this.remove=function(e){this.list.removeItem(e),app.storage.remove(e),app.cache.set(this.list)},this.clearCompleted=function(){for(var e,t=this.list.length-1;t>=0;t--)e=this.list.getIndex(t),e.completed()&&(app.storage.remove(e),this.list.removeIndex(t));app.cache.set(this.list)},this.amountCompleted=function(){for(var e=0,t=0;t<this.list.length;t++)this.list.getIndex(t).completed()&&e++;return e},this.allCompleted=function(){for(var e=0;e<this.list.length;e++)if(!this.list.getIndex(e).completed())return!1;return!0},this.openSettings=function(){this.settingsWindow("open")},this.closeSettings=function(){this.settingsWindow("close")},this.setupNotify=function(){window.Notification&&"granted"!==Notification.permission&&Notification.requestPermission()},this.canSetupNotify=function(){return!!window.Notification},this.notifyCount=0,this.notifyTimer=null,this.notifyBody="",this.notifyIds={},this.addNotification=function(e,t){var i=this;window.Notification&&"granted"===Notification.permission&&(this.notifyCount+=1,this.notifyIds[t]=e,this.notifyBody=this.notifyCount>1?"Added: "+this.notifyCount+" items":e,this.notifyTimer&&clearTimeout(this.notifyTimer),this.notifyTimer=setTimeout(function(){i.notify(i.notifyBody),i.notifyCount=0,i.notifyIds={}},45e3))},this.removeNotification=function(e){var t;if(e in this.notifyIds)if(this.notifyCount-=1,0===this.notifyCount)clearTimeout(this.notifyTimer),this.notifyIds={};else if(delete this.notifyIds[e],1===this.notifyCount)for(t in this.notifyIds)Object.prototype.hasOwnProperty.call(this.notifyIds,t)&&(this.notifyBody=this.notifyIds[t]);else this.notifyBody="Added: "+this.notifyCount+" items"},this.notify=function(e){if(window.Notification&&"granted"===Notification.permission){new Notification("Shopping",{body:e,icon:"img/basket.png"})}}};var app=app||{};app.watchInput=function(e,t){return function(i){i.keyCode===app.ENTER_KEY?e():i.keyCode===app.ESC_KEY&&t()}},app.view=function(){var e=!1;return function(t){return[m("div#settings",{"class":t.settingsWindow()},[m("h2","Settings"),m("ul",t.settings.map(function(e){return m("li.setting.toggle",[m("label",e.label),m("input.value[type=checkbox]",{onclick:t.updateSetting.bind(t,e),checked:e.value})])})),m("div.setting.button",{hidden:!t.canSetupNotify()},[m("button.ask-notify[type=button]",{onclick:t.setupNotify.bind(t)},"Setup Notifications")]),m("button.close[type=button]",{onclick:t.closeSettings.bind(t)},"Close Settings"),m(".note","Settings are saved local to this device only."),m(".note","Shopping App 0.17.0")]),m("header#header",[m('input#new-todo[placeholder="What do we need to buy?"]',{onkeyup:app.watchInput(t.add.bind(t),t.clearTitle.bind(t)),value:t.title(),oninput:m.withAttr("value",t.title),config:function(t){e||(t.focus(),e=!0)}})]),t.spinner()?m("div#load",m("div.loader","Loading...")):"",m("section#main",{style:{display:t.list.length?"":"none"}},[m("ul#todo-list",[t.list.groupByMap(t.aisles(),function(e){return m("li",{key:e,id:e,"class":"aisle"},m("label",e))},function(e,i,n,o,a){var s=a-o;return m("li",{key:e._id,id:e._id,style:{zIndex:s},"class":function(){var t="";return t+=e.completed()?"completed":"",t+=e.editing()?" editing":"",t+=e.expanded()?" expanded":""}()},[m(".view",[m("button.expand[type=button]",{onclick:t.expand.bind(t,e)}),m("label",{ondblclick:t.edit.bind(t,e)},e.title()),m("input.toggle[type=checkbox]",{onclick:m.withAttr("checked",t.complete.bind(t,e)),checked:e.completed()})]),m("input.edit",{value:e.title(),onkeyup:app.watchInput(t.doneEditing.bind(t,e),t.cancelEditing.bind(t,e)),oninput:m.withAttr("value",e.title),config:function(i){e.editing()&&!t.focusInit&&(i.focus(),i.selectionStart=i.value.length,t.focusInit=!0)},onblur:t.doneEditing.bind(t,e)}),m(".opts",[m("button.destroy[type=button]",{onclick:t.remove.bind(t,e)}),m(".aisleOpt",m("select",{onchange:t.changeAisle.bind(t,e)},app.aisles.map(function(t){return m("option",{value:t,selected:e.groupBy===t},t)})))])])},t.isVisible.bind(t))])]),app.footer(t)]}}();var app=app||{};app.footer=function(e){{var t=e.amountCompleted();e.list.length-t}return m("footer#footer",[m("span#todo-count",[m("button.open-settings[type=button]",{onclick:e.openSettings.bind(e)},m.trust("&nbsp;"))]),0===e.list.length?"":m("ul#filters",[m("li",[m("a[href=/]",{config:m.route,"class":""===e.filter()?"selected":""},"All")]),m("li",[m("a[href=/active]",{config:m.route,"class":"active"===e.filter()?"selected":""},"Unpurchased")])]),0===e.amountCompleted()?"":m("button#clear-completed",{onclick:e.clearCompleted.bind(e)},"Clear")])};var app=app||{};app.ENTER_KEY=13,app.ESC_KEY=27,m.route.mode="hash",m.route(document.getElementById("todoapp"),"/",{"/":app,"/:filter":app}),FastClick.attach(document.body),window.applicationCache&&(window.applicationCache.addEventListener("updateready",onUpdateReady),window.applicationCache.status===window.applicationCache.UPDATEREADY&&onUpdateReady());